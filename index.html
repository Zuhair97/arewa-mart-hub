<!DOCTYPE html>
<html lang="ha">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arewa-mart Hub | @Bashful97</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-storage-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #fdfdfd; }
        .arewa-theme { background: linear-gradient(135deg, #065f46 0%, #059669 100%); }
        .glass { background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(20px); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="pb-32">

    <header class="sticky top-0 z-50 glass border-b border-emerald-50 p-5 flex justify-between items-center shadow-sm">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 arewa-theme rounded-2xl flex items-center justify-center text-white font-black shadow-lg">AH</div>
            <div>
                <h1 class="text-sm font-black text-emerald-950 uppercase tracking-tighter leading-none">Arewa-mart</h1>
                <span class="text-[8px] font-bold text-emerald-600 uppercase tracking-widest">Master Admin</span>
            </div>
        </div>
        <button onclick="showCart()" class="relative p-2.5 bg-emerald-50 rounded-full">
            üõí <span id="cart-count" class="absolute -top-1 -right-1 bg-emerald-600 text-white text-[9px] px-1.5 py-0.5 rounded-full font-black">0</span>
        </button>
    </header>

    <div id="main-view">
        <div class="flex gap-4 overflow-x-auto px-5 py-6 no-scrollbar">
            <div class="flex flex-col items-center gap-2 min-w-[90px]">
                <div class="w-16 h-16 rounded-3xl overflow-hidden shadow-md border-2 border-white">
                    <img src="https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=200" class="w-full h-full object-cover">
                </div>
                <span class="text-[8px] font-black text-emerald-900 uppercase">Tech</span>
            </div>
            <div class="flex flex-col items-center gap-2 min-w-[90px]">
                <div class="w-16 h-16 rounded-3xl overflow-hidden shadow-md border-2 border-white">
                    <img src="https://images.unsplash.com/photo-1590038767624-dac5740a997b?w=200" class="w-full h-full object-cover">
                </div>
                <span class="text-[8px] font-black text-emerald-900 uppercase">Fashion</span>
            </div>
            <div class="flex flex-col items-center gap-2 min-w-[90px]">
                <div class="w-16 h-16 rounded-3xl overflow-hidden shadow-md border-2 border-white">
                    <img src="https://images.unsplash.com/photo-1523348837708-15d4a09cfac2?w=200" class="w-full h-full object-cover">
                </div>
                <span class="text-[8px] font-black text-emerald-900 uppercase">Agro</span>
            </div>
            <div class="flex flex-col items-center gap-2 min-w-[90px]">
                <div class="w-16 h-16 rounded-3xl overflow-hidden shadow-md border-2 border-white">
                    <img src="https://images.unsplash.com/photo-1581578731522-7b754775b058?w=200" class="w-full h-full object-cover">
                </div>
                <span class="text-[8px] font-black text-emerald-900 uppercase">Services</span>
            </div>
        </div>

        <main class="px-4 grid grid-cols-2 gap-4" id="items-grid">
            <p class="col-span-2 text-center py-20 text-gray-400 font-bold text-[10px] uppercase animate-pulse">Loda kaya...</p>
        </main>
    </div>

    <div id="admin-view" class="hidden p-6">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-black text-emerald-900 uppercase">Admin Dashboard</h2>
            <button onclick="showMain()" class="text-[10px] font-black bg-red-50 text-red-500 px-4 py-2 rounded-full uppercase">Koma Baya</button>
        </div>
        <div class="bg-white p-6 rounded-[2.5rem] shadow-xl border border-emerald-50 mb-10">
            <input id="p-name" placeholder="Suna (Misali: Zanna Cap)" class="w-full mb-3 p-4 bg-gray-50 rounded-2xl text-sm outline-none">
            <input id="p-price" type="number" placeholder="Farashi (Pi)" class="w-full mb-3 p-4 bg-gray-50 rounded-2xl text-sm outline-none">
            
            <select id="p-cat" class="w-full mb-4 p-4 bg-gray-50 rounded-2xl text-sm font-bold text-emerald-800 outline-none">
                <optgroup label="TECH">
                    <option value="phones">Phones/Laptops/Accessories</option>
                    <option value="electronics">Electronics/Electric Bikes</option>
                    <option value="kitchen">Kitchen Utensils</option>
                </optgroup>
                <optgroup label="FASHION">
                    <option value="men">Arewa Men Dresses/Zanna</option>
                    <option value="yards">Shedda/Atamfa/Lace</option>
                    <option value="kids">Kid's Dresses</option>
                    <option value="accessories">Shoes/Bags/Hijabs</option>
                </optgroup>
                <optgroup label="AGRO">
                    <option value="agro-inputs">Seeds/Fertilizer/Feed</option>
                    <option value="agro-produce">Rice/Beans/Eggs/Chicken</option>
                </optgroup>
                <optgroup label="SERVICES">
                    <option value="craft">Plumbing/Carpentry/Bricklaying</option>
                    <option value="interior">Interior Decorations</option>
                </optgroup>
            </select>

            <label class="block mb-6 cursor-pointer">
                <div class="w-full border-2 border-dashed border-emerald-200 rounded-2xl p-6 text-center text-gray-400">
                    <span id="file-label" class="text-[10px] font-black uppercase tracking-widest">Zabi Hoton Gaske</span>
                </div>
                <input type="file" id="p-file" accept="image/*" class="hidden" onchange="document.getElementById('file-label').innerText = 'Hoto ya hau!'">
            </label>
            
            <button id="upload-btn" onclick="uploadToFirebase()" class="w-full arewa-theme text-white py-4 rounded-2xl font-black shadow-xl tracking-widest uppercase">ADANA KAYA</button>
        </div>
    </div>

    <nav class="fixed bottom-6 left-6 right-6 h-20 glass border border-white/50 rounded-[2.5rem] flex justify-around items-center shadow-2xl z-50">
        <button onclick="showMain()" class="text-2xl">üè†</button>
        <button onclick="enterAdmin()" class="text-2xl">‚öôÔ∏è</button>
    </nav>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAWJMF1tg5XoTtWAqZVeKdmNgufl-PFt3E",
            authDomain: "arewa-mart-1663d.firebaseapp.com",
            projectId: "arewa-mart-1663d",
            storageBucket: "arewa-mart-1663d.firebasestorage.app",
            messagingSenderId: "782392811138",
            appId: "1:782392811138:web:4017800076060962239e9b",
            measurementId: "G-DPB8SGDNF5"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const storage = firebase.storage();

        function loadProducts() {
            const isAdmin = !document.getElementById('admin-view').classList.contains('hidden');
            db.collection("products").orderBy("createdAt", "desc").onSnapshot((snapshot) => {
                const grid = document.getElementById('items-grid');
                grid.innerHTML = '';
                snapshot.forEach((doc) => {
                    const p = doc.data();
                    const id = doc.id;
                    grid.innerHTML += `
                        <div class="bg-white p-2 rounded-[2rem] shadow-sm border border-emerald-50 relative overflow-hidden">
                            <img src="${p.url}" class="h-36 w-full object-cover rounded-[1.5rem] mb-3">
                            <div class="px-2 pb-2">
                                <h4 class="text-[9px] font-black text-emerald-950 uppercase truncate">${p.name}</h4>
                                <p class="text-emerald-600 font-black text-xs mb-3">${p.price} Pi</p>
                                ${isAdmin ? 
                                    `<button onclick="deleteProduct('${id}')" class="w-full bg-red-100 text-red-600 py-2 rounded-xl text-[9px] font-black uppercase">Goge üóëÔ∏è</button>` : 
                                    `<button onclick="alert('An saka a kwando!')" class="w-full bg-emerald-900 text-white py-2.5 rounded-xl text-[9px] font-black uppercase tracking-tighter">Saye</button>`
                                }
                            </div>
                        </div>`;
                });
            });
        }

        async function uploadToFirebase() {
            const name = document.getElementById('p-name').value;
            const price = document.getElementById('p-price').value;
            const cat = document.getElementById('p-cat').value;
            const file = document.getElementById('p-file').files[0];
            const btn = document.getElementById('upload-btn');

            if (!name || !price || !file) return alert("Cike komai!");
            btn.innerText = "ADANAWA..."; btn.disabled = true;

            try {
                const storageRef = storage.ref(`products/${Date.now()}_${file.name}`);
                await storageRef.put(file);
                const url = await storageRef.getDownloadURL();
                await db.collection("products").add({
                    name, price: parseFloat(price), category: cat, url, createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                alert("An adana kaya nasara!");
                showMain();
            } catch (e) { alert("An samu matsala!"); }
            btn.innerText = "ADANA KAYA"; btn.disabled = false;
        }

        async function deleteProduct(id) {
            if(confirm("Kana da tabbas kana son goge wannan kayan?")) {
                await db.collection("products").doc(id).delete();
                alert("An goge!");
            }
        }

        function showMain() { 
            document.getElementById('main-view').classList.remove('hidden'); 
            document.getElementById('admin-view').classList.add('hidden'); 
            loadProducts(); 
        }

        function enterAdmin() { 
            if(prompt("Password:") === "Zuhafs9700") { 
                document.getElementById('main-view').classList.add('hidden'); 
                document.getElementById('admin-view').classList.remove('hidden'); 
                loadProducts(); 
            } 
        }

        function showCart() { alert("Tsarin kwando yana nan tafe!"); }

        window.onload = loadProducts;
    </script>
</body>
</html>