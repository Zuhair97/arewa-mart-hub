<!DOCTYPE html>
<html lang="ha">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arewa-mart | @Bashful97</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; }
        .arewa-gradient { background: linear-gradient(135deg, #065f46 0%, #059669 100%); }
        .glass-nav { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
        .cat-btn.active { background-color: #065f46; color: white; transform: scale(1.05); }
    </style>
</head>
<body class="pb-24">

    <header class="sticky top-0 z-50 glass-nav border-b p-4 flex justify-between items-center shadow-sm">
        <div class="flex items-center gap-2">
            <div class="w-10 h-10 arewa-gradient rounded-xl flex items-center justify-center text-white font-black shadow-lg">AH</div>
            <h1 class="text-sm font-black text-emerald-950 uppercase" id="brand-name">AREWA-MART</h1>
        </div>
        <button onclick="handleLangSwitch()" id="lang-switcher" class="bg-emerald-100 text-emerald-700 px-4 py-2 rounded-xl text-[10px] font-bold uppercase">ENGLISH</button>
    </header>

    <div id="user-interface">
        <div class="flex gap-3 overflow-x-auto p-4 no-scrollbar">
            <button onclick="filterBy('all')" id="btn-all" class="cat-btn active px-6 py-2 rounded-full text-[10px] font-bold border whitespace-nowrap trans-txt" data-ha="DUKA" data-en="ALL">DUKA</button>
            <button onclick="filterBy('tech')" id="btn-tech" class="cat-btn px-6 py-2 rounded-full text-[10px] font-bold border whitespace-nowrap trans-txt" data-ha="LANTAKRI" data-en="TECH">LANTAKRI</button>
            <button onclick="filterBy('fashion')" id="btn-fashion" class="cat-btn px-6 py-2 rounded-full text-[10px] font-bold border whitespace-nowrap trans-txt" data-ha="TUFAFI" data-en="FASHION">TUFAFI</button>
            <button onclick="filterBy('agro')" id="btn-agro" class="cat-btn px-6 py-2 rounded-full text-[10px] font-bold border whitespace-nowrap trans-txt" data-ha="NOMA" data-en="AGRO">NOMA</button>
        </div>

        <main class="px-4 grid grid-cols-2 gap-4" id="product-list"></main>
    </div>

    <div id="admin-panel" class="hidden p-6">
        <h2 class="text-xl font-black mb-6 text-emerald-900 trans-txt" data-ha="SASHIN ADMIN" data-en="ADMIN PANEL">SASHIN ADMIN</h2>
        <div class="space-y-4 bg-white p-6 rounded-3xl shadow-xl">
            <input id="inp-name" placeholder="Sunan Kaya" class="w-full p-4 bg-gray-50 rounded-2xl outline-none border focus:border-emerald-500">
            <input id="inp-price" type="number" placeholder="Farashi (Pi)" class="w-full p-4 bg-gray-50 rounded-2xl outline-none border focus:border-emerald-500">
            <select id="inp-cat" class="w-full p-4 bg-gray-50 rounded-2xl font-bold">
                <option value="tech">Tech</option>
                <option value="fashion">Fashion</option>
                <option value="agro">Agro</option>
            </select>
            <input id="inp-url" placeholder="Saka Link din hoto (Image URL)" class="w-full p-4 bg-gray-50 rounded-2xl outline-none border border-emerald-200">
            <p class="text-[9px] text-gray-400 px-2 italic">* Tunda Firebase dinka tana bukatar Kati, saka link din hoto anan kai tsaye.</p>
            <button onclick="saveToCloud()" id="save-btn" class="w-full arewa-gradient text-white py-4 rounded-2xl font-black uppercase trans-txt" data-ha="ADANA KAYA" data-en="SAVE PRODUCT">ADANA KAYA</button>
            <button onclick="closeAdmin()" class="w-full text-gray-400 text-xs font-bold uppercase py-2">Koma Baya</button>
        </div>
    </div>

    <nav class="fixed bottom-6 left-6 right-6 h-16 glass-nav border rounded-full flex justify-around items-center shadow-2xl">
        <button onclick="closeAdmin()" class="text-xl">üè†</button>
        <button onclick="openAdmin()" class="text-xl">‚öôÔ∏è</button>
    </nav>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAWJMF1tg5XoTtWAqZVeKdmNgufl-PFt3E",
            authDomain: "arewa-mart-1663d.firebaseapp.com",
            projectId: "arewa-mart-1663d",
            appId: "1:782392811138:web:ac528c22d93caf7a239e9b"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        let currentLang = 'ha';
        let currentFilter = 'all';

        function handleLangSwitch() {
            currentLang = (currentLang === 'ha') ? 'en' : 'ha';
            document.getElementById('lang-switcher').innerText = (currentLang === 'ha') ? 'ENGLISH' : 'HAUSA';
            
            document.querySelectorAll('.trans-txt').forEach(el => {
                el.innerText = el.getAttribute('data-' + currentLang);
            });
            
            document.getElementById('inp-name').placeholder = (currentLang === 'ha') ? 'Sunan Kaya' : 'Item Name';
            document.getElementById('inp-price').placeholder = (currentLang === 'ha') ? 'Farashi (Pi)' : 'Price (Pi)';
            
            fetchItems();
        }

        function filterBy(cat) {
            currentFilter = cat;
            document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('btn-' + cat).classList.add('active');
            fetchItems();
        }

        async function saveToCloud() {
            const name = document.getElementById('inp-name').value;
            const price = document.getElementById('inp-price').value;
            const cat = document.getElementById('inp-cat').value;
            const url = document.getElementById('inp-url').value;

            if(!name || !price || !url) return alert("Cike komai!");

            await db.collection("products").add({
                name, price: parseFloat(price), category: cat, url,
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            });
            
            alert("An adana!");
            closeAdmin();
        }

        function fetchItems() {
            const grid = document.getElementById('product-list');
            const isAdmin = !document.getElementById('admin-panel').classList.contains('hidden');
            
            let query = db.collection("products").orderBy("createdAt", "desc");
            if(currentFilter !== 'all') query = query.where("category", "==", currentFilter);

            query.onSnapshot(snap => {
                grid.innerHTML = '';
                snap.forEach(doc => {
                    const p = doc.data();
                    grid.innerHTML += `
                        <div class="bg-white p-2 rounded-[2rem] shadow-sm border border-emerald-50">
                            <img src="${p.url}" class="h-32 w-full object-cover rounded-[1.5rem] mb-2">
                            <div class="px-2">
                                <h4 class="text-[10px] font-black text-emerald-950 uppercase truncate">${p.name}</h4>
                                <p class="text-emerald-600 font-bold text-xs mb-2">${p.price} Pi</p>
                                ${isAdmin ? 
                                    `<button onclick="deleteProduct('${doc.id}')" class="w-full bg-red-50 text-red-500 py-1.5 rounded-xl text-[9px] font-black">GOGE</button>` : 
                                    `<button class="w-full arewa-gradient text-white py-2 rounded-xl text-[9px] font-black">${currentLang==='ha'?'SAYE':'BUY'}</button>`
                                }
                            </div>
                        </div>`;
                });
            });
        }

        function openAdmin() {
            if(prompt("Pass:") === "Zuhafs9700") {
                document.getElementById('user-interface').classList.add('hidden');
                document.getElementById('admin-panel').classList.remove('hidden');
                fetchItems();
            }
        }

        function closeAdmin() {
            document.getElementById('user-interface').classList.remove('hidden');
            document.getElementById('admin-panel').classList.add('hidden');
            fetchItems();
        }

        async function deleteProduct(id) {
            if(confirm("Goge?")) await db.collection("products").doc(id).delete();
        }

        window.onload = fetchItems;
    </script>
</body>
</html>