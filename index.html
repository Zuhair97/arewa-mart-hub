<!DOCTYPE html>
<html lang="ha">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arewa-mart Hub | @Bashful97</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-storage-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; }
        .arewa-theme { background: linear-gradient(135deg, #065f46 0%, #059669 100%); }
        .glass { background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(15px); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="pb-32">

    <header class="sticky top-0 z-50 glass border-b border-emerald-50 p-4 flex justify-between items-center shadow-sm">
        <div class="flex items-center gap-2">
            <div class="w-10 h-10 arewa-theme rounded-xl flex items-center justify-center text-white font-black shadow-lg">AH</div>
            <h1 class="text-md font-extrabold text-emerald-900 uppercase">Arewa-mart</h1>
        </div>
        <button onclick="showCart()" class="relative p-2 bg-emerald-50 rounded-full">
            üõí <span id="cart-count" class="absolute -top-1 -right-1 bg-red-500 text-white text-[9px] px-1.5 py-0.5 rounded-full font-bold">0</span>
        </button>
    </header>

    <div id="main-view">
        <div class="flex gap-4 overflow-x-auto px-5 py-6 no-scrollbar" id="cat-list">
            <div class="flex flex-col items-center gap-2 min-w-[80px]">
                <div class="w-14 h-14 bg-blue-50 rounded-2xl flex items-center justify-center text-2xl shadow-sm">üì±</div>
                <span class="text-[9px] font-black text-emerald-900 uppercase">Lantarki</span>
            </div>
            <div class="flex flex-col items-center gap-2 min-w-[80px]">
                <div class="w-14 h-14 bg-pink-50 rounded-2xl flex items-center justify-center text-2xl shadow-sm">üëï</div>
                <span class="text-[9px] font-black text-emerald-900 uppercase">Tufafi</span>
            </div>
            <div class="flex flex-col items-center gap-2 min-w-[80px]">
                <div class="w-14 h-14 bg-orange-50 rounded-2xl flex items-center justify-center text-2xl shadow-sm">üåæ</div>
                <span class="text-[9px] font-black text-emerald-900 uppercase">Noma</span>
            </div>
            <div class="flex flex-col items-center gap-2 min-w-[80px]">
                <div class="w-14 h-14 bg-purple-50 rounded-2xl flex items-center justify-center text-2xl shadow-sm">ü™°</div>
                <span class="text-[9px] font-black text-emerald-900 uppercase">Dinki</span>
            </div>
        </div>

        <main class="px-4 grid grid-cols-2 gap-4" id="items-grid">
            <p class="col-span-2 text-center py-20 text-gray-400 font-bold text-xs">ANA LODA KAYA...</p>
        </main>
    </div>

    <div id="admin-view" class="hidden p-5">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-black text-emerald-900">Admin Control</h2>
            <button onclick="showMain()" class="text-xs font-bold text-red-500">RUFE</button>
        </div>
        <div class="bg-white p-5 rounded-[2rem] shadow-xl border border-emerald-50 mb-8">
            <input id="p-name" placeholder="Sunan Kaya" class="w-full mb-3 p-4 bg-gray-50 rounded-2xl text-sm outline-none">
            <input id="p-price" type="number" placeholder="Farashi (Pi)" class="w-full mb-3 p-4 bg-gray-50 rounded-2xl text-sm outline-none">
            <input type="file" id="p-file" accept="image/*,video/*" class="w-full mb-4 text-xs file:bg-emerald-50 file:rounded-full file:border-0 file:px-4 file:py-2">
            <button id="upload-btn" onclick="uploadToFirebase()" class="w-full arewa-theme text-white py-4 rounded-2xl font-black">ADANA HAR ABADA</button>
        </div>
    </div>

    <div id="cart-modal" class="fixed inset-0 z-[100] hidden bg-black/60 backdrop-blur-sm flex items-end">
        <div class="bg-white w-full rounded-t-[3rem] p-8 shadow-2xl">
            <h3 class="text-xl font-black text-emerald-900 mb-6">Kwandon Saye</h3>
            <div id="cart-items" class="space-y-3 mb-6 max-h-40 overflow-y-auto"></div>
            <div class="flex justify-between border-t pt-4 mb-6">
                <span class="font-bold">Jimilla:</span><span id="cart-total" class="font-black text-emerald-700">0 Pi</span>
            </div>
            <button onclick="alert('An tura oda!')" class="w-full arewa-theme text-white py-4 rounded-2xl font-black uppercase shadow-lg">Tura Oda</button>
            <button onclick="hideCart()" class="w-full text-gray-400 font-bold text-xs mt-4">KOMA BAYA</button>
        </div>
    </div>

    <nav class="fixed bottom-6 left-6 right-6 h-16 glass border rounded-[2rem] flex justify-around items-center shadow-2xl z-50">
        <button onclick="showMain()" class="text-2xl">üè†</button>
        <button onclick="enterAdmin()" class="text-2xl">‚öôÔ∏è</button>
    </nav>

    <script>
        // 1. FIREBASE CONFIGURATION (Saka apiKey dinka kawai anan)
        const firebaseConfig = {
            apiKey: "SAKA_API_KEY_DINKA_ANAN", 
            authDomain: "arewa-mart-1663d.firebaseapp.com",
            projectId: "arewa-mart-1663d",
            storageBucket: "arewa-mart-1663d.appspot.com",
            messagingSenderId: "782392811138",
            appId: "1:782392811138:web:ac528c22d93caf7a239e9b"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const storage = firebase.storage();

        let cart = [];

        function loadProducts() {
            db.collection("products").onSnapshot((snapshot) => {
                const grid = document.getElementById('items-grid');
                grid.innerHTML = '';
                snapshot.forEach((doc) => {
                    const p = doc.data();
                    grid.innerHTML += `
                        <div class="bg-white p-3 rounded-[2rem] shadow-sm border border-emerald-50 text-center">
                            <img src="${p.url}" class="h-28 w-full object-cover rounded-[1.5rem] mb-2">
                            <h4 class="text-[10px] font-black uppercase truncate">${p.name}</h4>
                            <p class="text-emerald-600 font-black text-xs mb-3">${p.price} Pi</p>
                            <button onclick="addToCart('${p.name}', ${p.price})" class="w-full bg-emerald-900 text-white py-2 rounded-xl text-[9px] font-black">+ KWANDO</button>
                        </div>`;
                });
            });
        }

        async function uploadToFirebase() {
            const name = document.getElementById('p-name').value;
            const price = document.getElementById('p-price').value;
            const file = document.getElementById('p-file').files[0];
            const btn = document.getElementById('upload-btn');

            if (!name || !price || !file) return alert("Cike komai!");

            btn.innerText = "Ana Adanawa...";
            btn.disabled = true;

            const storageRef = storage.ref(`products/${file.name}`);
            await storageRef.put(file);
            const url = await storageRef.getDownloadURL();

            await db.collection("products").add({ name, price: parseFloat(price), url });
            alert("An Adana!");
            btn.innerText = "ADANA HAR ABADA";
            btn.disabled = false;
            showMain();
        }

        function addToCart(name, price) { cart.push({name, price}); document.getElementById('cart-count').innerText = cart.length; alert("An saka " + name); }
        function showCart() {
            const list = document.getElementById('cart-items');
            list.innerHTML = ''; let total = 0;
            cart.forEach(i => { total += i.price; list.innerHTML += `<div class="flex justify-between text-[10px] bg-gray-50 p-2 rounded-lg"><span>${i.name}</span><b>${i.price}œÄ</b></div>`; });
            document.getElementById('cart-total').innerText = total + " Pi";
            document.getElementById('cart-modal').classList.remove('hidden');
        }
        function hideCart() { document.getElementById('cart-modal').classList.add('hidden'); }
        function showMain() { document.getElementById('main-view').classList.remove('hidden'); document.getElementById('admin-view').classList.add('hidden'); }
        function enterAdmin() { if(prompt("Password:") === "Zuhafs9700") { document.getElementById('main-view').classList.add('hidden'); document.getElementById('admin-view').classList.remove('hidden'); } }

        window.onload = loadProducts;
    </script>
</body>
</html>