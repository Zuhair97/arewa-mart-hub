<!DOCTYPE html>
<html lang="ha">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pi-Mart Global | Shagon Pi na Farko</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <style>
        /* Karamin gyaran CSS don santsi */
        .glass-effect { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); }
        .product-card:active { transform: scale(0.95); transition: 0.2s; }
    </style>
</head>
<body class="bg-gray-50 font-sans pb-20">

    <header class="sticky top-0 z-50 glass-effect border-b p-4 flex justify-between items-center">
        <div class="flex items-center gap-2">
            <div class="bg-purple-600 p-2 rounded-lg text-white font-bold">Ï€</div>
            <h1 class="text-xl font-extrabold text-purple-900 tracking-tight">Pi-Mart</h1>
        </div>
        <div id="user-display" class="flex items-center gap-2 bg-purple-100 px-3 py-1 rounded-full border border-purple-200">
            <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
            <span id="username" class="text-xs font-semibold text-purple-800 italic uppercase">Connecting...</span>
        </div>
    </header>

    <div class="p-4">
        <div class="relative">
            <input type="text" placeholder="Nemo kaya..." class="w-full p-3 pl-10 rounded-2xl border-none bg-white shadow-sm focus:ring-2 focus:ring-purple-500">
            <span class="absolute left-3 top-3.5">ğŸ”</span>
        </div>
    </div>

    <div class="flex gap-4 overflow-x-auto px-4 py-2 no-scrollbar">
        <button class="bg-purple-600 text-white px-6 py-2 rounded-full shadow-md text-sm whitespace-nowrap italic">Duk Kaya</button>
        <button class="bg-white text-gray-600 px-6 py-2 rounded-full border text-sm whitespace-nowrap">Elektronik</button>
        <button class="bg-white text-gray-600 px-6 py-2 rounded-full border text-sm whitespace-nowrap">Tufafi</button>
        <button class="bg-white text-gray-600 px-6 py-2 rounded-full border text-sm whitespace-nowrap">Abinci</button>
    </div>

    <main class="p-4 grid grid-cols-2 gap-4" id="app-products">
        </main>

    <footer class="fixed bottom-0 w-full bg-white border-t p-3 grid grid-cols-4 shadow-2xl z-50">
        <button class="flex flex-col items-center text-purple-600"><span class="text-xl">ğŸ </span><span class="text-[10px] font-bold">Home</span></button>
        <button class="flex flex-col items-center text-gray-400 relative">
            <span class="text-xl">ğŸ›’</span><span class="text-[10px]">Cart</span>
            <span id="cart-count" class="absolute -top-1 right-4 bg-red-500 text-white text-[10px] px-1.5 rounded-full hidden">0</span>
        </button>
        <button class="flex flex-col items-center text-gray-400"><span class="text-xl">ğŸ“‹</span><span class="text-[10px]">History</span></button>
        <button class="flex flex-col items-center text-gray-400"><span class="text-xl">âš™ï¸</span><span class="text-[10px]">Settings</span></button>
    </footer>

    <script>
        // Data na gaske na Pi-Mart
        const inventory = [
            { id: 1, name: "Pi Smart Watch", price: 12.5, img: "âŒš", color: "bg-blue-100" },
            { id: 2, name: "Developer Hoodie", price: 25.0, img: "ğŸ‘•", color: "bg-orange-100" },
            { id: 3, name: "Wireless Earbuds", price: 18.2, img: "ğŸ§", color: "bg-green-100" },
            { id: 4, name: "Solar PowerBank", price: 8.5, img: "ğŸ”‹", color: "bg-yellow-100" }
        ];

        let cartCount = 0;

        // Render UI
        function loadProducts() {
            const grid = document.getElementById('app-products');
            inventory.forEach(item => {
                grid.innerHTML += `
                    <div class="product-card bg-white p-4 rounded-3xl shadow-sm border border-gray-100 flex flex-col items-center">
                        <div class="h-28 w-full ${item.color} rounded-2xl flex items-center justify-center text-5xl mb-3 shadow-inner">
                            ${item.img}
                        </div>
                        <h3 class="text-sm font-bold text-gray-800 text-center mb-1">${item.name}</h3>
                        <div class="flex items-center gap-1 mb-3">
                            <span class="text-purple-700 font-extrabold text-lg italic leading-none">${item.price}</span>
                            <span class="text-xs font-bold text-purple-400 uppercase">Ï€</span>
                        </div>
                        <button onclick="addToCart(${item.id})" class="w-full bg-gray-900 text-white py-2 rounded-xl text-xs font-bold active:scale-95 transition-all">
                            ADD TO CART
                        </button>
                    </div>
                `;
            });
        }

        function addToCart(id) {
            cartCount++;
            const badge = document.getElementById('cart-count');
            badge.innerText = cartCount;
            badge.classList.remove('hidden');
            // Shawara: Za mu iya sanya karamin notification a nan
        }

        // Pi SDK Authentication Logic (Updated)
        const Pi = window.Pi;
        Pi.init({ version: "2.0" });

        async function startApp() {
            try {
                const scopes = ['username', 'payments'];
                const auth = await Pi.authenticate(scopes, (p) => console.log("Unfinished:", p));
                document.getElementById('username').innerText = auth.user.username;
            } catch (e) {
                document.getElementById('username').innerText = "GUEST MODE";
            }
        }

        window.onload = () => {
            loadProducts();
            startApp();
        };
    </script>
</body>
</html>